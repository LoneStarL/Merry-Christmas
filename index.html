<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merry Christmas WebGL</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            overflow: hidden; 
            background: #000; 
            font-family: 'Poppins', sans-serif;
        }
        #canvas-container { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            z-index: 1;
        }
        .glassmorphism {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
        }
        .title-glow {
            text-shadow: 
                0 0 10px rgba(255, 215, 0, 0.8),
                0 0 20px rgba(255, 215, 0, 0.6),
                0 0 40px rgba(255, 215, 0, 0.4),
                0 0 80px rgba(255, 215, 0, 0.2);
        }
        @keyframes breathe {
            0%, 100% { opacity: 0.6; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.05); }
        }
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        @keyframes marquee {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        .breathing { animation: breathe 2s ease-in-out infinite; }
        .rotating { animation: rotate 4s linear infinite; }
        .marquee { animation: marquee 10s linear infinite; }
    </style>
</head>
<body>
    <div id="canvas-container"></div>
    
    <!-- Camera Elements for Hand Gesture Detection -->
    <div id="camera-container" class="fixed bottom-6 right-6 z-20" style="width: 200px; height: 150px;">
        <video id="video" class="w-full h-full rounded-lg object-cover" playsinline></video>
        <canvas id="hand-canvas" class="absolute top-0 left-0 w-full h-full pointer-events-none" style="z-index: 1;"></canvas>
        <div id="gesture-info" class="absolute bottom-0 left-0 right-0 bg-black/60 text-white text-xs text-center p-1 rounded-b-lg">
            Hand Gesture Detection: Off
        </div>
        <button 
            id="camera-toggle" 
            class="absolute top-2 right-2 w-6 h-6 rounded-full bg-red-500/70 flex items-center justify-center text-white text-xs font-bold transition-all hover:bg-red-600 z-20"
            title="Toggle Camera">
            â–¶
        </button>
    </div>
    
    <!-- Main Title -->
    <div id="title" class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 pointer-events-none transition-opacity duration-1000">
        <h1 class="text-6xl md:text-8xl font-bold text-yellow-400 title-glow" style="font-family: 'Great Vibes', cursive;">
            Merry Christmas
        </h1>

    </div>
    
    <!-- Status Panel (Top Left) -->
    <div id="status-panel" class="fixed top-4 left-4 z-20 glassmorphism p-4 min-w-[200px]">
        
        <div class="text-white/60 text-xs">
            <p id="phase-text">Phase: Tree</p>
            <p class="mt-1" id="instruction-text">O: Explode | C: Reset</p>
        </div>
    </div>
    
    <!-- Audio Element -->
    <audio id="background-music" loop>
        <source src="/assets/media/Merry Christmas Mr. Lawrence - å‚æœ¬é¾ä¸€.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <!-- Music Player (Bottom Center) -->
    <div id="music-player" class="fixed bottom-6 left-1/2 transform -translate-x-1/2 glass px-6 py-3 flex items-center gap-4 z-20">
        <div id="music-icon" class="text-3xl" style="color: #a8d8ea">
            â„ï¸
        </div>
        <div class="flex flex-col">
            <div class="overflow-hidden w-48">
                <div id="music-title" class="text-white/90 text-sm whitespace-nowrap">
                    ğŸ„ Merry Christmas Mr. Lawrence - Ryuichi Sakamoto
                </div>
            </div>
            <div class="text-white/40 text-xs">Christmas Piano</div>
        </div>
        <button 
            id="music-toggle"
            class="w-10 h-10 rounded-full flex items-center justify-center transition-all"
            style="background: rgba(255,255,255,0.1)">
            <span id="play-pause-icon">â–¶</span>
        </button>
    </div>
    
    <!-- Interaction Hint -->
    <div id="interaction-hint" class="fixed bottom-24 left-1/2 transform -translate-x-1/2 z-10 text-white/50 text-sm text-center pointer-events-none">
        <p>Move mouse over the tree for ripple effect</p>
    </div>
    
    <!-- Hidden Envelope Feature -->
    <div id="envelope-container" class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-30 pointer-events-none opacity-0">
        <div id="envelope" class="relative cursor-pointer pointer-events-auto" style="width: 450px; height: 250px; box-shadow: 0 12px 48px rgba(0, 0, 0, 0.4), 0 0 60px rgba(255, 215, 0, 0.1);">
            <!-- Envelope Flap -->
            <div id="envelope-flap" class="absolute top-0 left-0 w-full h-1/2 bg-gradient-to-b from-red-600 via-red-700 to-red-800 clip-path: polygon(50% 0%, 0% 100%, 100% 100%); transition: all 0.6s ease; border-radius: 0 0 12px 12px; background-image: radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);"></div>
            <!-- Envelope Body -->
            <div id="envelope-body" class="absolute bottom-0 left-0 w-full h-1/2 bg-gradient-to-t from-red-900 via-red-800 to-red-700 transition: all 0.6s ease; background-image: radial-gradient(circle at 80% 70%, rgba(255, 255, 255, 0.08) 0%, transparent 50%);"></div>
            <!-- Envelope Sides -->
            <div id="envelope-left" class="absolute bottom-0 left-0 w-1/2 h-full bg-gradient-to-r from-red-950 via-red-900 to-red-850 clip-path: polygon(0% 100%, 0% 0%, 100% 50%); transition: all 0.6s ease;"></div>
            <div id="envelope-right" class="absolute bottom-0 right-0 w-1/2 h-full bg-gradient-to-l from-red-500 via-red-600 to-red-700 clip-path: polygon(100% 100%, 100% 0%, 0% 50%); transition: all 0.6s ease;"></div>
            
            <!-- Christmas Art Text on Envelope -->
            <div id="envelope-text" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center z-5 pointer-events-none">
                <div class="text-yellow-300 mb-2" style="font-size: 2rem;">
                    ğŸ„
                </div>
                <p class="text-yellow-400 font-bold text-3xl md:text-4xl" style="font-family: 'Great Vibes', cursive; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.6), 0 0 10px rgba(255, 215, 0, 0.3); letter-spacing: 1px;">
                    Merry Christmas!
                </p>
                <p class="text-white/70 text-sm mt-2">Click to open</p>
            </div>
            
            <!-- Letter inside -->
            <div id="letter" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-4/5 bg-gradient-to-b from-white to-yellow-50 rounded-lg transition: all 0.8s ease; overflow: hidden; opacity: 0; min-height: 75%; max-height: 120%; box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.08), 0 10px 30px rgba(0, 0, 0, 0.2); border: 2px solid #FBBF24; background-image: 
                linear-gradient(to bottom, transparent 23px, #FDE68A 23px, #FDE68A 24px, transparent 24px),
                radial-gradient(circle at center, rgba(255, 215, 0, 0.03) 0%, transparent 70%);
                background-size: 100% 28px, cover;
                background-position: 0 15px, center; z-index: 10;">
                <div id="letter-content" class="text-sm text-gray-800 opacity-0 leading-relaxed" style="font-family: 'KaiTi', 'æ¥·ä½“', 'Noto Serif SC', serif; line-height: 2.1; padding: 24px;">
                    <p class="mb-4 text-gray-700">äº²çˆ±çš„è®¸ä¹¦è¡ï¼š</p>
                    <p class="mb-4 text-gray-700">&nbsp;&nbsp;&nbsp;&nbsp;å±•ä¿¡ä½³ã€‚</p>
                    <p class="mb-4 text-gray-700">&nbsp;&nbsp;&nbsp;&nbsp;ä¸–é—´ç¼˜åˆ†ï¼Œå¤§æŠµæ˜¯æŸç§ä¸å¯è¨€è¯´çš„ç„å­¦ã€‚ä½•å…¶æœ‰å¹¸ï¼Œåœ¨è¿™ä¸ªè™šæ‹Ÿçš„ä¸–ç•Œï¼Œé‡åˆ°äº†çœŸè¯šä¸”åŒé¢‘çš„ä½ ã€‚è™½ç›¸è¯†æœªä¹…ï¼Œå´ä¼¼æ—§å‹å½’æ¥ï¼Œæè‹¥ä¹…åˆ«é‡é€¢ã€‚å°†è¿‡å¾€äºŒåä½™è½½çš„äººç”Ÿï¼Œè½»è½»æŠ˜å è¿›äº†è¿™ä¸€æ–¹å¯¹è¯æ¡†ä¸­ï¼Œéš”ç€å±å¹•çš„å¾®å…‰ï¼Œå´åœ¨æ–‡å­—é—´å¬è§äº†çµé­‚çš„å›å“ã€‚è‹¥å‘½è¿è½¨è¿¹æ³¨å®šåœ¨æ­¤åˆ»äº¤æ±‡ï¼Œè¯·å…è®¸æˆ‘åšä½ è¿™æ®µæœªçŸ¥æ—…é€”ä¸­å®‰é™çš„æ—…äººã€‚</p>
                    <p class="mb-4 text-gray-700">&nbsp;&nbsp;&nbsp;&nbsp;æ°¸è¿œå¤ªè¿œï¼Œæ‰¿è¯ºå¤ªé‡ã€‚è‹¥æœ‰æœä¸€æ—¥ï¼Œä½ å†³å®šè½¬èº«ï¼Œè¯·ä¸å¿…æŒ‚æ€€ï¼Œæˆ‘äº¦ä¸ä¼šè¿½é—®ï¼Œåªä¼šå°†è¿™æ®µæ—¶å…‰ä»”ç»†å°å­˜ï¼Œåƒçè—ä¸€å°ä»æœªå¯„å‡ºçš„ä¹¦ä¿¡ã€‚å°±åƒæ‰€æœ‰æ•…äº‹çš„å¼€å¤´ï¼Œä¸è¿‡æ˜¯å¥ç®€å•çš„â€œä½ å¥½â€ã€‚</p>
                    <p class="mb-4 text-gray-700">&nbsp;&nbsp;&nbsp;&nbsp;å€˜è‹¥ä»–æ—¥æœˆè‰²æ­£å¥½ï¼Œä½ æŠ¬å¤´æœ›æœˆï¼Œè€Œæˆ‘ä¹Ÿæ­£æœ›ç€åŒä¸€ç‰‡æ¸…è¾‰ï¼Œé‚£ä¾¿è®©é‚£å¥æœªæ›¾è¯´å‡ºå£çš„â€œè®¤è¯†ä½ çœŸå¥½â€ï¼Œåœ¨æœˆè‰²ä¸‹æ‚„ç„¶é‡é€¢ã€‚</p>
                    <p class="mb-4 text-gray-700">&nbsp;&nbsp;&nbsp;&nbsp;æ„¿ä½ é•¿å¤œæœ‰ç¯ï¼Œæ¢¦é‡Œæœ‰å½’é€”ï¼Œé†’æ¥æœ‰å¦é€”ã€‚ä¹Ÿæ„¿è¿™æ®µç¼˜åˆ†ï¼Œæ¸©æŸ”ä½ å¾€åçš„å±±é«˜æ°´é•¿ã€‚</p>
                    <div class="text-right mt-8">
                        <p class="text-gray-600">ææ¾æ—</p>
                        <p class="text-gray-600">2025å¹´12æœˆ25æ—¥</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="/src/index.jsx"></script>
</body>
</html>